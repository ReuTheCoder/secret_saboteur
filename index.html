<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Pass n' Play</title>

  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#00BCD4;
  --primary-dark:#0097A7;
  --bg:#ffffff;
  --text:#212121;
  --muted:#6b6b6b;
  --card:#f7f7f7;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,system-ui;
  background:var(--bg);
  color:var(--text);
}

.screen{
  max-width:420px;
  margin:0 auto;
  padding:24px 16px 40px;
  display:none;
}
.screen.active{display:block}

.flip-wrap {
  perspective: 1000px;
  margin-bottom: 20px;
}

@keyframes slideFadeIn {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.screen.results-animate {
  animation: slideFadeIn 0.8s ease forwards;
}

  #resultMessage {
  text-align: center;
  font-size: 1.8rem;
  margin-bottom: 12px;
  animation: popIn 0.4s ease;
}

  #multiSaboteurHint{
  animation: pulse 1.6s ease-in-out infinite;
}

@keyframes pulse{
  0%,100%{opacity:.6}
  50%{opacity:1}
}

@keyframes popIn {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.correct {
  color: #2e7d32;
}

.incorrect {
  color: #c62828;
}

  #results button + button {
  margin-top: 12px;
}

  #currentName {
  margin-bottom: 16px;
}

.card.sab-card {
  background: #000;
  color: #fff;
  position: relative;
}

.info-btn {
  position: static;
  top: 12px;
  right: 12px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: none;
 background: rgba(0,188,212,0.15);
  color: var(--primary);
  font-weight: 700;
  font-size: 1rem;
  padding: 0;
}

.info-btn:active {
  transform: scale(0.95);
}

 .hint-toggle {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  font-size: 0.9rem;
  color: var(--muted);
  margin-top: 12px;
  line-height: 1.3;
}

.hint-toggle input {
  margin-top: 3px;
  flex-shrink: 0;
}

.hint-toggle {
  flex-wrap: wrap;
}

  @media (max-width: 480px) {
  .hint-toggle {
    flex-direction: row;
  }
}
  .popup {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.popup.hidden {
  display: none;
}

.popup-content {
  background: white;
  color: var(--text);
  border-radius: 18px;
  padding: 20px;
  max-width: 320px;
  text-align: center;
}

  .confetti {
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 999;
}

.confetti span {
  position: absolute;
  width: 8px;
  height: 12px;
  background: var(--primary);
  opacity: 0.9;
  animation: fall 1.8s linear forwards;
}
  #likelihoodHint {
  display: none;
}


@keyframes fall {
  from {
    transform: translateY(-20px) rotate(0deg);
  }
  to {
    transform: translateY(100vh) rotate(360deg);
  }
}

  #intro .info-btn {
  position: static;
  top: 16px;
  right: 16px;
    width: 44px;
  height: 44px;
  font-size: 1.1rem;
}
  #intro {
  position: relative;
}

  .small-btn {
  padding: 8px 12px;
  font-size: 0.9rem;
  width: auto;
  margin: 12px auto 20px;
  display: block;
}

#promptText {
  text-align: center;
  margin-top: 12px;
}

  .scale {
  gap: 6px;
}

  @keyframes pressPulse {
  0%   { transform: scale(1); }
  50%  { transform: scale(0.94); }
  100% { transform: scale(1); }
}

  @keyframes shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-4px); }
  50% { transform: translateX(4px); }
  75% { transform: translateX(-4px); }
  100% { transform: translateX(0); }
}

.shake {
  animation: shake 0.3s ease;
}
.scale div.pulse {
  animation: pressPulse 0.4s ease;
}

  .scale {
  opacity: 0;
  transform: translateY(12px);
  animation: scaleIn 0.5s ease forwards;
}

@keyframes scaleIn {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

  #guess {
  animation: glowPulse 2s ease-in-out infinite;
}

@keyframes glowPulse {
  0% {
    box-shadow: 0 0 0 rgba(0,188,212,0);
  }
  50% {
    box-shadow: 0 0 24px rgba(0,188,212,0.25);
  }
  100% {
    box-shadow: 0 0 0 rgba(0,188,212,0);
  }
}

  .info-btn {
  z-index: 100;
}
  .intro-info {
  margin-top: 28px;
  display: flex;
  justify-content: center;
}

  .hidden {
  display: none;
}

  #playerGrid button {
  width: auto;
  min-width: 64px;
}
  
  #playerGrid {
  grid-template-columns: repeat(4, 1fr);
  max-width: 300px;
  margin: 20px auto;
}
  
  button.selected{
  background:var(--primary);
  color:white;
  box-shadow:0 0 0 3px rgba(0,188,212,.35);
}

  .grid{
  justify-items:center;
}
.grid button{
  max-width:90px;
}
  #guess .grid{
  max-width:300px;
  margin:0 auto;
}

  #saboteurChoices button{
  width:auto;
  padding:10px 14px;
  font-size:0.95rem;
  min-width:90px;
}

  .likelihood-hint {
  text-align: center;
  font-size: 0.85rem;
  color: var(--muted);
  margin-top: 10px;
  opacity: 0.8;
}
  #home .grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
}

#home .grid button {
  width: 100%;
  max-width: 100%;
}
  
@media (min-width: 600px) {
  #home .grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

  /* Screen transitions */
.screen {
  opacity: 0;
  transform: translateY(16px);
  pointer-events: none;
  transition:
    opacity 0.35s ease,
    transform 0.35s ease;
}

.screen.active {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

/*  reverse motion for exit */
.screen.exit {
  opacity: 0;
  transform: translateY(-16px);
}

  .screen.from-right {
  transform: translateX(24px);
}

.screen.from-left {
  transform: translateX(-24px);
}
  #saboteurDiscussionStarter,
#imposterDiscussionStarter {
  font-size: 1.1rem;
  color: var(--primary);
}

h1,h2{text-align:center;margin:0}
h1{font-size:2.2rem}
h2{font-size:1.6rem}

.sub{
  text-align:center;
  color:var(--muted);
  margin:8px 0 20px;
}

button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  font-size:1.1rem;
  font-weight:600;
  background:var(--primary);
  color:white;
}
button.secondary{
  background:white;
  color:var(--text);
  border:2px solid #e0e0e0;
}
button:active{transform:scale(.98)}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(80px, 1fr));
  justify-content:center;
  gap:12px;
  margin:20px 0;
}

.player-btn {
  position: relative;
}

.player-btn::after {
  content: attr(data-num);
  position: absolute;
  top: 6px;
  right: 10px;
  font-size: 0.7rem;
  opacity: 0.6;
}
.card{
  background:var(--card);
  border-radius:18px;
  padding:18px;
  margin:20px 0;
}

  @keyframes unlockPop {
  0% { transform: scale(0.95); box-shadow: none; }
  60% { transform: scale(1.05); box-shadow: 0 0 18px rgba(0,188,212,.6); }
  100% { transform: scale(1); box-shadow: none; }
}

button.unlock-animate {
  animation: unlockPop 0.4s ease;
}

input{
  width:100%;
  padding:14px;
  font-size:1rem;
  border-radius:12px;
  border:1.5px solid #ccc;
  margin-bottom:12px;
}

/* FLIP CARD */
.flip-wrap{
  perspective:1000px;
}
.flip{
  position:relative;
  width:100%;
  height:260px;
  transform-style:preserve-3d;
  transition:transform .6s;
}
.flip.revealed{transform:rotateY(180deg)}
.face{
  position:absolute;
  width:100%;
  height:100%;
  border-radius:20px;
  backface-visibility:hidden;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:20px;
  text-align:center;
}
.front{
  background:var(--primary);
  color:white;
}
.back{
  transform:rotateY(180deg);
  background:var(--primary);
  color:white;
}
.saboteur .back{
  background:black;
  filter:grayscale(1);
}

/* Eye icon */
.eye{
  width:56px;
  height:56px;
  border-radius:50%;
  background:rgba(255,255,255,.2);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  margin-bottom:12px;
}

.scale{
  display:flex;
  gap:4px;
  margin:12px 0;
}
.scale div{
  flex:1;
  background: var(--primary);
  color: white;
  border-radius:6px;
  font-weight:600;
  padding: 8px;

  display:flex;
  align-items:center;
  justify-content:center;
}
.scale .dark{background:var(--primary);color:white}

.footer{
  text-align:center;
  margin-top:16px;
  font-size:.9rem;
  color:var(--muted);
}

  #home .grid {
  justify-items: center;
}

#home .grid button {
  width: 100%;
  max-width: 260px;
}

  .btn-small {
  width: 44px;
  height: 44px;
  padding: 0;
  font-size: 1.2rem;
  border-radius: 12px;
}

 .category-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;

  padding: 12px;
  min-height: 60px;

  white-space: normal;
  word-break: keep-all;
  overflow-wrap: break-word;

  line-height: 1.2;
   word-break: break-word;
}

.category-btn.active {
  transform: scale(1.07);
  box-shadow:
    0 0 0 3px rgba(0,188,212,0.5),
    0 0 22px rgba(0,188,212,0.85),
    0 0 42px rgba(0,188,212,0.45);
}
  #imposterNameInputs input {
  margin-bottom: 18px;
}
.imposter-card {
  background: black;
  color: white;
  width: 100%;
  height: 100%;
  border-radius: 20px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
  .button-stack button + button {
  margin-top: 12px;
}
.word-label {
  color: rgba(255,255,255,0.85);
  font-size: 0.95rem;
  margin-bottom: 4px;
}

.secret-word {
  color: white;
  margin-top: -4;

}
.category-btn {
  transition:
    transform 0.15s ease,
    box-shadow 0.15s ease,
    background 0.15s ease;
}

.category-btn.active {
  transform: scale(1.05);
  box-shadow: 0 6px 18px rgba(0,188,212,0.35);
}

.category-btn:active {
  transform: scale(0.96);
}
@keyframes selectPop {
  0%   { transform: scale(0.95); }
  60%  { transform: scale(1.08); }
  100% { transform: scale(1); }
}

.category-btn.active {
  animation: selectPop 0.25s ease;
}

  
</style>
</head>

<body>
<!-- HOME / HUB -->
<div class="screen active" id="home">
  <h1>Pass n' Play!</h1>
  <div class="sub">
    Fun party games that only require one screen
  </div>

  <div class="card">
    <h2>Games</h2>

    <div class="grid">
      <button onclick="launchSecretSaboteur()">
        Secret Saboteur
      </button>
      <button onclick="launchImposter()">Imposter</button>
    </div>
  </div>
</div>

<!-- INTRO -->
<div class="screen" id="intro">
  
  <h1>Secret Saboteur</h1>
  <div class="sub">A social deduction party game</div>

  <div class="card">
    <h2>How many players?</h2>
    <div class="grid" id="playerGrid"></div>
    <div class="footer">Select 3‚Äì10 players to start</div>
  </div>
 <div class="intro-info">
  <button class="info-btn" onclick="showRules()">?</button>
</div>
</div>

<!-- NAMES -->
<div class="screen" id="names">
  <h2>Enter Player Names</h2>
  <div class="sub">Who‚Äôs playing today?</div>
  <div class="card" id="nameInputs"></div>
 
  <div id="saboteurSelect" class="card hidden">
  <h3 style="text-align:center">Number of Saboteurs</h3>
  <div class="grid" id="saboteurCountGrid"></div>
</div>
  
 <button onclick="confirmSaboteurAndStart()">Continue ‚Üí</button>
</div>

<!-- ROLE -->
<div class="screen" id="role">
  <div class="sub">Pass the device to</div>
  <h2 id="currentName"></h2>

  <div class="flip-wrap">
    <div class="flip" id="flipCard" onclick="toggleFlip()">
      <div class="face front">
        <h2>Tap to Reveal</h2>
      </div>
      <div class="face back" id="roleBack"></div>
    </div>
  </div>

  <button onclick="nextPlayer()">Next Player</button>
</div>

<!-- DISCUSSION -->
<div class="screen" id="discussion">
  <h2>Discussion Time</h2>
  <h3 id="saboteurDiscussionStarter" style="text-align:center;margin-top:8px"></h3>

  <div class="sub">Each player gives an answer</div>

  <h3 id="promptText"></h3>
  <div class="card">
    <div class="scale" id="scaleBar"></div>
    <div style="display:flex;justify-content:space-between">
      <small id="lowLabel"></small>
      <small id="highLabel"></small>
    </div>
  </div>

 <button class="secondary small-btn" onclick="rerollPrompt()">‚Üª New Prompt</button>
<button onclick="toGuess()">Continue to Guess ‚Üí</button>
</div>

<!-- GUESS -->
<div class="screen" id="guess">
  <h2>Guesser</h2>
  <div class="sub" id="guessPrompt"></div>
  <div id="likelihoodHint" class="likelihood-hint"></div>
<h3 style="text-align:center">1. Guess the Number</h3>
  <div class="grid">
     <button class="player-btn" onclick="makeGuess(1)">1</button>
  <button class="player-btn" onclick="makeGuess(2)">2</button>
  <button class="player-btn" onclick="makeGuess(3)">3</button>
  <button class="player-btn" onclick="makeGuess(4)">4</button>
  <button class="player-btn" onclick="makeGuess(5)">5</button>
  <button class="player-btn" onclick="makeGuess(6)">6</button>
  <button class="player-btn" onclick="makeGuess(7)">7</button>
  <button class="player-btn" onclick="makeGuess(8)">8</button>
  <button class="player-btn" onclick="makeGuess(9)">9</button>
  <button class="player-btn" onclick="makeGuess(10)">10</button>
  </div>

  <div class="card">
  <h3 style="text-align:center">2. Guess the Saboteur</h3>
  <div id="saboteurChoices" class="grid"></div>
</div>

<button id="submitGuessBtn" onclick="submitGuess()" disabled>
  Submit Guess
</button>
  
</div>

<!-- RESULTS -->
<div class="screen" id="results">
  <h2>Results</h2>
  <div class="card">
    <h2 id="resultMessage"></h2>
    <p id="resultText" style="font-weight:700;font-size:1.2rem;text-align:center"></p>
    <p>The number was <b id="realNum"></b></p>
    <p>Guesser said <b id="guessNum"></b></p>
  </div>

  <div class="card sab-card">
  Saboteur was <b id="sabName"></b>

  <button class="info-btn" onclick="showSaboteurInfo()">?</button>
</div>

  <button onclick="playAgain()">‚Üª Play Again</button>
  <button class="secondary" onclick="resetGame()">New Game</button>
</div>

  <div class="screen" id="imposter-setup">
  <h1>Imposter</h1>
  <div class="sub">Secret word social deduction</div>

  <div class="card">
    <h2>Players</h2>
    <div style="display:flex;align-items:center;justify-content:center;gap:12px;">
      <button class="btn-small" onclick="changeImposterPlayers(-1)">‚àí</button>
      <div id="imposterPlayerCount" style="font-size:1.4rem;font-weight:700;">3</div>
      <button class="btn-small" onclick="changeImposterPlayers(1)">+</button>
    </div>
  </div>

 <div class="card">
  <h2>Categories</h2>

 <div class="grid" id="categoryGrid">
  <button class="category-btn active" data-cat="objects">Everyday Objects</button>
  <button class="category-btn" data-cat="food">Food & Drinks</button>
  <button class="category-btn" data-cat="animals">Animals</button>
  <button class="category-btn" data-cat="colors">Colors</button>
  <button class="category-btn" data-cat="shapes">Shapes</button>
  <button class="category-btn" data-cat="emotions">Emotions & Feelings</button>
  <button class="category-btn" data-cat="music">Music</button>
  <button class="category-btn" data-cat="brands">Brands</button>
  <button class="category-btn" data-cat="hobbies">Hobbies & Sports</button>
  <button class="category-btn" data-cat="movies">Movies & TV</button>
  <button class="category-btn" data-cat="jobs">Occupations</button>
  <button class="category-btn" data-cat="nature">Weather & Nature</button>
  <button class="category-btn" data-cat="science">Science & Tech</button>
  <button class="category-btn" data-cat="transport">Transportation</button>
</div>


  <button onclick="startImposterNames()">Start Game ‚Üí</button>
</div>
<div class="screen" id="imposter-names">
  <h2>Players & Imposters</h2>

  <div class="card" id="imposterNameInputs"></div>

  <div class="card">
    <h3>Imposters</h3>
    <div style="display:flex;align-items:center;justify-content:center;gap:12px;">
      <button onclick="changeImposterCount(-1)">‚àí</button>
      <div id="imposterCountDisplay">1</div>
      <button onclick="changeImposterCount(1)">+</button>
    </div>
    <div class="sub" id="imposterLimitText"></div>
  </div>

  <button onclick="startImposterRoles()">Continue ‚Üí</button>
</div>

  <div class="screen" id="imposter-role">
  <div class="sub">Pass the device to</div>
  <h2 id="imposterCurrentName"></h2>

  <div class="flip-wrap">
    <div class="flip" id="imposterFlip" onclick="toggleImposterFlip()">
      <div class="face front">
        <h2>Tap to Reveal</h2>
      </div>
      <div class="face back" id="imposterRoleBack"></div>
    </div>
  </div>

  <button style="margin-top:20px" onclick="nextImposterPlayer()">Next Player</button>
</div>

 <div class="screen" id="imposter-discussion">
  <h2>Discussion Time</h2>
   <h3 id="imposterDiscussionStarter" style="text-align:center;margin-top:8px"></h3>

  <div class="card">
    <p><b>Game started!</b></p>
    <p>Discuss and catch the imposter.</p>
  </div>

  <button onclick="revealImposter()">Reveal Imposter</button>
</div>

  <div class="screen" id="imposter-results">
  <h2>Results</h2>

  <div class="card" style="text-align:center;">
  <p>The word was:</p>
  <h2 id="imposterWordReveal"></h2>
</div>

<div class="card" style="background:black;color:white;text-align:center;">
  <p>Imposter(s):</p>
  <h3 id="imposterList"></h3>
</div>
<div class="button-stack">
  <button onclick="launchImposter()">‚Üª Play Again</button>
  <button class="secondary" onclick="show('home')">Back to Hub</button>
</div>
</div>

<script>
/* --- DATA --- */
const prompts = [
  { title: "Reasons to call 911", low: "Reasonable", high: "Ridiculous" },
  { title: "Places to nap", low: "Very comfortable", high: "Very uncomfortable" },
  { title: "Cool for a high-schooler", low: "Not cool", high: "Cool" },
  { title: "Things to discover in your pocket", low: "Exciting", high: "Not exciting" },
  { title: "Last words", low: "Forgettable", high: "Memorable" },
  { title: "Movies", low: "Relaxing", high: "Intense" },
  { title: "TV shows", low: "Serious", high: "Relaxing" },
  { title: "Food to eat at 7am", low: "Good", high: "Bad" },
  { title: "Places for summer vacation", low: "Worst", high: "Best" },
  { title: "Times to do homework", low: "Good", high: "Bad" },

  { title: "Excuses to leave a party early", low: "Believable", high: "Unbelievable" },
  { title: "Things you should never Google", low: "Harmless", high: "Traumatizing" },
  { title: "Things that ruin your day", low: "Minor", high: "Devastating" },
  { title: "Reasons to cancel plans", low: "Acceptable", high: "Unforgivable" },
  { title: "School supplies", low: "Useless", high: "Essential" },
  { title: "Ways to get suspended", low: "Understandable", high: "Stupid" },
  { title: "Things to do in class when bored", low: "Quiet", high: "Disruptive" },
  { title: "Clubs to join", low: "Boring", high: "Fun" },
  { title: "Times to laugh", low: "Appropriate", high: "Inappropriate" },
  { title: "Things to accidentally text your teacher", low: "Fine", high: "Horrifying" },

  { title: "Icebreakers", low: "Boring", high: "Painfully awkward" },
  { title: "Foods to bring to a potluck", low: "Welcomed", high: "Questioned" },
  { title: "Midnight snacks", low: "Normal", high: "Concerning" },
  { title: "Foods to eat in class", low: "Stealthy", high: "Obvious" },
  { title: "Foods that should never be microwaved", low: "Bad", high: "War crime" },
  { title: "Restaurant orders", low: "Safe", high: "Risky" },
  { title: "Places to sit", low: "Comfortable", high: "Miserable" },
  { title: "Sounds to fall asleep to", low: "Soothing", high: "Unbearable" },
  { title: "Clothes to sleep in", low: "Comfy", high: "A mistake" },
  { title: "Weather to walk in", low: "Pleasant", high: "Brutal" },

  { title: "Times to wake up", low: "Ideal", high: "Cruel" },
  { title: "Things to yell in a library", low: "Quiet", high: "Unacceptable" },
  { title: "Places to lose your phone", low: "Recoverable", high: "Hopeless" },
  { title: "Ways to get famous", low: "Respectable", high: "Infamous" },
  { title: "Lies", low: "Believable", high: "Terrible" },
  { title: "Secrets", low: "Harmless", high: "Life-ruining" },
  { title: "Bad ideas", low: "Questionable", high: "Catastrophic" },
  { title: "Social mistakes", low: "Forgivable", high: "Unforgettable" },
  { title: "Times to leave", low: "Polite", high: "Dramatic" },
  { title: "Things to do instead of studying", low: "Understandable", high: "Irresponsible" },
  
  { title: "Things that make you instantly cringe", low: "Mild", high: "Physically painful" },
  { title: "Things to hear right before a test", low: "Comforting", high: "Terrifying" },
  { title: "Things to forget at a sleepover", low: "No big deal", high: "Friendship-ending" },
  { title: "Things that should never be said in a group chat", low: "Awkward", high: "Nuclear" },
  { title: "Things that feel like a scam", low: "Suspicious", high: "Obviously fake" },
  { title: "Things that make a teacher pause", low: "Confusing", high: "Concerning" },
  { title: "Things that feel illegal to do alone", low: "A little weird", high: "Extremely alarming" },
  { title: "Things to say when you don't hear someone", low: "Polite", high: "Unhinged" },
  { title: "Things that ruin a vibe instantly", low: "Buzzkill", high: "Atmosphere destroyer" },
  { title: "Things that make a room go silent", low: "Unexpected", high: "Catastrophic" },

  { title: "Things to bring to a group project meeting", low: "Helpful", high: "Pointless" },
  { title: "Things that shouldn't be competitive", low: "Odd", high: "Unhinged" },
  { title: "Things that feel personal but aren't", low: "Slightly invasive", high: "Way too much" },
  { title: "Things to be late to", low: "Forgivable", high: "Unacceptable" },
  { title: "Things to say when someone trips", low: "Supportive", high: "Evil" },
  { title: "Things that feel louder than they are", low: "Noticeable", high: "Deafening" },
  { title: "Things that make you rethink a friendship", low: "Questionable", high: "Dealbreaker" },
  { title: "Things to overhear on public transit", low: "Boring", high: "Life-changing" },
  { title: "Things that shouldn't have lore", low: "Odd", high: "Deeply unsettling" },
  { title: "Things that make waiting worse", low: "Annoying", high: "Unbearable" },

  { title: "Things that feel like a jump scare", low: "Startling", high: "Heart attack" },
  { title: "Things that shouldn't be sticky", low: "Annoying", high: "Horrifying" },
  { title: "Things to say during a presentation", low: "Recoverable", high: "Career-ending" },
  { title: "Things that make you immediately apologize", low: "Oops", high: "I'm so sorry" },
  { title: "Things to notice too late", low: "Inconvenient", high: "Disastrous" },
  { title: "Things that feel illegal at night", low: "Suspicious", high: "Terrifying" },
  { title: "Things that should not be whispered", low: "Strange", high: "Threatening" },
  { title: "Things to hear from the next room", low: "Confusing", high: "Alarming" },
  { title: "Things that make silence worse", low: "Awkward", high: "Unbearable" },
  { title: "Things that ruin confidence instantly", low: "Doubt-inducing", high: "Soul-crushing" },

  { title: "Things to bring up at the wrong time", low: "Awkward", high: "Unforgivable" },
  { title: "Things that feel cursed", low: "Off-putting", high: "Actively haunted" },
  { title: "Things that shouldn't make noise", low: "Annoying", high: "Terrifying" },
  { title: "Things to forget you're holding", low: "Embarrassing", high: "Dangerous" },
  { title: "Things that make you question reality", low: "Confusing", high: "Existential crisis" },
  
  { title: "Things that feel awkward way too fast", low: "Mild", high: "Unbearable" },
  { title: "Things that feel illegal but aren't", low: "Suspicious", high: "Heart-racing" },
  { title: "Things that ruin concentration instantly", low: "Distracting", high: "Impossible" },
  { title: "Things you shouldn't clap for", low: "Odd", high: "Unhinged" },
  { title: "Things that feel colder than expected", low: "Chilly", high: "Freezing" },
  { title: "Things that feel louder than they are", low: "Noticeable", high: "Deafening" },
  { title: "Things that shouldn't be sticky", low: "Annoying", high: "Horrifying" },
  { title: "Things that make people stare", low: "Curious", high: "Alarmed" },
  { title: "Things that feel too personal to ask", low: "Awkward", high: "Unacceptable" },
  { title: "Things that feel fake even when real", low: "Suspicious", high: "Impossible" },

  { title: "Things that ruin a good mood", low: "Minor", high: "Day-ending" },
  { title: "Things that feel wrong at night", low: "Weird", high: "Terrifying" },
  { title: "Things that feel dramatic for no reason", low: "Extra", high: "Unhinged" },
  { title: "Things that should never be whispered", low: "Strange", high: "Threatening" },
  { title: "Things that feel longer than they are", low: "Dragging", high: "Endless" },
  { title: "Things that feel rude but aren't", low: "Blunt", high: "Savage" },
  { title: "Things that instantly kill confidence", low: "Doubtful", high: "Crushing" },
  { title: "Things that feel illegal in public", low: "Embarrassing", high: "Unthinkable" },
  { title: "Things that feel suspiciously quiet", low: "Calm", high: "Ominous" },
  { title: "Things that feel too powerful", low: "Impressive", high: "Terrifying" },

  { title: "Things that feel unsafe emotionally", low: "Awkward", high: "Devastating" },
  { title: "Things that shouldn't be competitive", low: "Odd", high: "Unhinged" },
  { title: "Things that feel worse when watched", low: "Uncomfortable", high: "Impossible" },
  { title: "Things that feel fake-polite", low: "Forced", high: "Painful" },
  { title: "Things that feel cursed", low: "Off-putting", high: "Actively haunted" },
  { title: "Things that make silence worse", low: "Awkward", high: "Unbearable" },
  { title: "Things that feel like a trap", low: "Suspicious", high: "Certain doom" },
  { title: "Things that feel oddly threatening", low: "Unsettling", high: "Terrifying" },
  { title: "Things that feel wrong immediately", low: "Off", high: "Alarming" },
  { title: "Things that feel too intense too fast", low: "Strong", high: "Overwhelming" }
];

let players=[],roles=[],count=0,idx=0,number=0,guess=0,round=1;

  let guessedNobody = false;
  let saboteurCount = 1;
let guessedNumber = null;
let guessedSaboteurs = [];
  let submitWasDisabled = true;
  let showLikelihoodHint = false;
  let discussionStarterIndex = null;

const sounds = {
  flip: new Audio("data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQgAAAAA"),
  correct: new Audio("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQgAAAAA"),
  wrong: new Audio("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQgAAAAA")
};

  const screenStack = [];

/* --- FLOW --- */
  function launchSecretSaboteur() {
  resetGame();      // ensures clean state
  show('intro');    // enters the game
}
  function launchImposter() {
  show("imposter-setup");
}

  function pushScreen(id) {
  const current = screenStack[screenStack.length - 1];
  const next = document.getElementById(id);
  if (!next) return;

  if (current) {
    current.classList.remove("active");
    current.classList.add("exit-left");
  }

  next.classList.add("active", "from-right");
  screenStack.push(next);

  requestAnimationFrame(() => {
    next.classList.remove("from-right");
  });
}

  function popScreen() {
  if (screenStack.length <= 1) return;

  const current = screenStack.pop();
  const previous = screenStack[screenStack.length - 1];

  current.classList.remove("active");
  current.classList.add("exit-right");

  previous.classList.add("active", "from-left");

  requestAnimationFrame(() => {
    previous.classList.remove("from-left");
  });
}

function replaceWith(id) {
  screenStack.length = 0;
  document.querySelectorAll(".screen").forEach(s =>
    s.classList.remove("active", "exit-left", "exit-right")
  );

  const next = document.getElementById(id);
  next.classList.add("active");
  screenStack.push(next);
}

function show(id, direction = "right") {
  document.querySelectorAll(".screen").forEach(s => {
    s.classList.remove("active", "exit", "from-left", "from-right");
  });

  const next = document.getElementById(id);
  if (!next) return;

  next.classList.add("active");
  next.classList.add(direction === "right" ? "from-right" : "from-left");

  requestAnimationFrame(() => {
    next.classList.remove("from-right", "from-left");
  });
}

const grid=document.getElementById('playerGrid');
for(let i = 3; i <= 10; i++) {
  const btn = document.createElement("button");
btn.textContent = i;
btn.onclick = () => selectPlayers(i);
grid.appendChild(btn);
}

function selectPlayers(n){
  count = n;
  show('names');

  const wrap = document.getElementById('nameInputs');
  wrap.innerHTML = '';

  for(let i = 0; i < n; i++){
    wrap.innerHTML += `<input value="Player ${i+1}">`;
  }

  const sabBox = document.getElementById('saboteurSelect');
sabBox.classList.remove('hidden');

setupSaboteurCountSelect();
saboteurCount = 1; // default
}

  function setSaboteurs(n) {
  saboteurCount = n;
}

function getActualSaboteurCount(maxSaboteurs) {
  const roll = Math.random() * 100;

  const tables = {
    1: [
      { count: 0, chance: 20 },
      { count: 1, chance: 80 }
    ],
    2: [
      { count: 0, chance: 10 },
      { count: 1, chance: 30 },
      { count: 2, chance: 60 }
    ],
    3: [
      { count: 0, chance: 5 },
      { count: 1, chance: 15 },
      { count: 2, chance: 20 },
      { count: 3, chance: 60 }
    ],
    4: [
      { count: 0, chance: 1 },
      { count: 1, chance: 15 },
      { count: 2, chance: 16 },
      { count: 3, chance: 18 },
      { count: 4, chance: 50 } // remainder
    ]
  };

  let cumulative = 0;
  for (const entry of tables[maxSaboteurs]) {
    cumulative += entry.chance;
    if (roll <= cumulative) {
      return entry.count;
    }
  }

  return maxSaboteurs; // safety fallback
}

function startRound(){
  players=[...document.querySelectorAll('#nameInputs input')].map(i=>i.value||'Player');
  roles = Array(count).fill('teammate');

// Assign Guesser
const guesserIndex = Math.floor(Math.random() * count);
roles[guesserIndex] = 'guesser';



// Assign Saboteurs
let available = [...Array(count).keys()].filter(i => i !== guesserIndex);

const actualSaboteurCount = getActualSaboteurCount(saboteurCount);

// assign saboteurs (RANDOM UP TO MAX)
for (let i = 0; i < actualSaboteurCount; i++) {
  const pick = Math.floor(Math.random() * available.length);
  roles[available[pick]] = "saboteur";
  available.splice(pick, 1);
}


  
  number=Math.floor(Math.random()*10)+1;
  idx=0;
  showRole();
}

function showRole(){
  document.getElementById('currentName').textContent=players[idx];
  const back=document.getElementById('roleBack');
  const role=roles[idx];
  const flip = back.parentElement;
flip.classList.remove('saboteur');
if (role === 'saboteur') flip.classList.add('saboteur');
  
  back.innerHTML=`
    <div class="eye">üëÅÔ∏è</div>
    <h2>${role.toUpperCase()}</h2>
    <p>${role==='teammate'?'Help the Guesser!':role==='saboteur'?'Mislead the group!':'Show everyone your role, you are guessing the number!'}</p>
    ${role!=='guesser'?`<h1>${number}</h1>`:''}
  `;
  document.getElementById('flipCard').classList.remove('revealed');
  show('role');
}

function revealCorrectness(teammatesWin) {
  const msg = document.getElementById('resultMessage');

  if (teammatesWin) {
    sounds.correct.play();
    msg.textContent = "‚úÖ Teammates Win!";
    msg.className = "correct";
  } else {
    sounds.wrong.play();
    msg.textContent = "‚ùå Saboteurs Win!";
    msg.className = "incorrect";
  }
}

function nextPlayer(){
  idx++;
  if(idx<count) showRole();
  else startDiscussion();
}

function startDiscussion(){
   const eligible = roles
    .map((r, i) => r !== "guesser" ? i : null)
    .filter(i => i !== null);

  discussionStarterIndex =
    eligible[Math.floor(Math.random() * eligible.length)];
  
  const scale = document.getElementById('scaleBar');
scale.style.animation = 'none';
scale.offsetHeight; // reflow
scale.style.animation = '';
  const p=prompts[Math.floor(Math.random()*prompts.length)];
  window.curPrompt=p;
  document.getElementById('promptText').textContent=p.title;
  document.getElementById('lowLabel').textContent=p.low;
  document.getElementById('highLabel').textContent=p.high;
  document.getElementById('scaleBar').innerHTML='';
  for (let i = 1; i <= 10; i++) {
  document.getElementById('scaleBar').innerHTML += `<div>${i}</div>`;
}
  const hintEl = document.getElementById("likelihoodHint");

if (showLikelihoodHint) {
  const likelihood = getSaboteurLikelihood();
  hintEl.textContent = `Saboteur likelihood: ${likelihood}`;
  hintEl.style.display = "block";
} else {
  hintEl.style.display = "none";
}
  document.getElementById("saboteurDiscussionStarter").innerHTML =
  `<strong>${players[discussionStarterIndex]}</strong> starts the discussion`;

  show('discussion');
  pulseScale();
}

function toGuess() {
  document.getElementById('guessPrompt').textContent = curPrompt.title;

  guessedNumber = null;
  guessedSaboteurs = [];
  guessedNobody = false;
  submitWasDisabled = true;

  setupSaboteurChoices();
  updateSubmitButton();

  show('guess');
}

function makeGuess(n){
  guessedNumber = n;

  document
    .querySelectorAll("#guess .player-btn")
    .forEach(b => b.classList.remove("selected"));

  const btns = document.querySelectorAll("#guess .player-btn");
  btns[n - 1]?.classList.add("selected");

  updateSubmitButton();
}

  function selectSaboteur(index, btn) {

  // "Nobody" option
 if (index === null) {
  guessedSaboteurs = [];
  guessedNobody = true;

  document
    .querySelectorAll("#saboteurChoices button")
    .forEach(b => b.classList.remove("selected"));

  btn.classList.add("selected");
  updateSubmitButton();
  return;
}

  // Remove "Nobody" selection if choosing a player
 document
  .querySelectorAll("#saboteurChoices button")
  .forEach(b => {
    if (b.textContent === "Nobody") b.classList.remove("selected");
  });

guessedNobody = false;

  const existingIndex = guessedSaboteurs.indexOf(index);

  // Unselect if already selected
  if (existingIndex !== -1) {
    guessedSaboteurs.splice(existingIndex, 1);
    btn.classList.remove("selected");
  } 
  // Enforce limit
  else {
    if (guessedSaboteurs.length >= saboteurCount) {
      // Small UX feedback
      btn.classList.add("shake");
      setTimeout(() => btn.classList.remove("shake"), 300);
      return;
    }
    guessedSaboteurs.push(index);
    btn.classList.add("selected");
  }

  updateSubmitButton();
}

function updateSubmitButton() {
  const btn = document.getElementById("submitGuessBtn");

  const numberReady = guessedNumber !== null;

  const saboteurReady =
    guessedNobody ||
    guessedSaboteurs.length > 0 &&
    guessedSaboteurs.length <= saboteurCount;

  btn.disabled = !(numberReady && saboteurReady);

  if (!btn.disabled) triggerSubmitUnlock(btn);
}


  function submitGuess() {
  const correctNumber = guessedNumber === number;

  const saboteurIndices = roles
    .map((r, i) => r === "saboteur" ? i : null)
    .filter(i => i !== null);

  let correctSaboteur;

if (saboteurIndices.length === 0) {
  correctSaboteur = guessedNobody;
} else {

  correctSaboteur =
  guessedNobody
    ? saboteurIndices.length === 0
    : saboteurIndices.every(i => guessedSaboteurs.includes(i));

}


const teammatesWin = correctNumber || correctSaboteur;
    if (teammatesWin) {
  launchConfetti();
}
  document.getElementById("realNum").textContent = number;
  document.getElementById("guessNum").textContent = guessedNumber;

  document.getElementById("sabName").textContent =
    saboteurIndices.length
      ? saboteurIndices.map(i => players[i]).join(", ")
      : "Nobody";

  document.getElementById("resultText").textContent =
     
    correctNumber && correctSaboteur
      ? "Perfect! Number AND Saboteur guessed!"
      : teammatesWin
        ? "Teammates win!"
        : "Saboteurs win!";
        
  revealCorrectness(teammatesWin);

  show("results");

  
}

  
  function showSaboteurInfo() {
  document.getElementById('sabPopup').classList.remove('hidden');
}

function closeSaboteurInfo() {
  document.getElementById('sabPopup').classList.add('hidden');
}

  function launchConfetti() {
  const wrap = document.createElement('div');
  wrap.className = 'confetti';

  for (let i = 0; i < 80; i++) {
    const c = document.createElement('span');
    c.style.left = Math.random() * 100 + 'vw';
    c.style.animationDelay = Math.random() * 0.4 + 's';
    wrap.appendChild(c);
  }

  document.body.appendChild(wrap);
  setTimeout(() => wrap.remove(), 2000);
}

  function toggleFlip() {
  sounds.flip.play();
  document.getElementById('flipCard').classList.toggle('revealed');
}

  function rerollPrompt() {
  startDiscussion();
}

  function showRules() {
  document.getElementById('rulesPopup').classList.remove('hidden');
}

function closeRules() {
  document.getElementById('rulesPopup').classList.add('hidden');
}

  function getMaxSaboteurs(playerCount){
  if (playerCount >= 10) return 4;
  if (playerCount >= 8) return 3;
  if (playerCount >= 6) return 2;
  return 1;
}

  function confirmSaboteurAndStart(){
  if (!saboteurCount) {
    alert("Please select the number of Saboteurs.");
    return;
  }
  startRound();
}

  function getSaboteurLikelihood() {
  if (saboteurCount <= 1) return "Low";
  if (saboteurCount === 2) return "High";
  return "Very High";
}

  
  function setupSaboteurCountSelect(){
  const maxSab = getMaxSaboteurs(count);
  const container = document.getElementById("saboteurCountGrid");
  container.innerHTML = "";

  for (let i = 1; i <= maxSab; i++){
    const btn = document.createElement("button");
    btn.textContent = i;
    btn.onclick = () => {
      saboteurCount = i;
      document
        .querySelectorAll("#saboteurCountGrid button")
        .forEach(b => b.classList.remove("selected"));
      btn.classList.add("selected");
    };

    if (i === 1) btn.classList.add("selected"); // default highlight
    container.appendChild(btn);
  }
}


  function pulseScale() {
  const items = document.querySelectorAll('#scaleBar div');
  items.forEach((el, i) => {
    setTimeout(() => {
      el.classList.add('pulse');
      setTimeout(() => el.classList.remove('pulse'), 400);
    }, i * 120);
  });
}
  
function setupSaboteurChoices() {
  const wrap = document.getElementById("saboteurChoices");
  wrap.innerHTML = "";

  players.forEach((name, i) => {
    const btn = document.createElement("button");
    btn.textContent = name;
    btn.onclick = () => selectSaboteur(i, btn);
    wrap.appendChild(btn);
  });

  // Nobody option
  const nobodyBtn = document.createElement("button");
  nobodyBtn.textContent = "Nobody";
  nobodyBtn.onclick = () => selectSaboteur(null, nobodyBtn);
  wrap.appendChild(nobodyBtn);
}

function playAgain(){
  startRound();
}



function triggerSubmitUnlock(btn) {
  if (submitWasDisabled) {
    btn.classList.remove("unlock-animate");
    void btn.offsetWidth; // reset animation
    btn.classList.add("unlock-animate");
  }
  submitWasDisabled = false;
}
  

  function handleKey(e) {
  const key = e.key;

  // ----- POPUPS -----
  if (key === "Escape") {
    closeRules();
    closeSaboteurInfo();
    return;
  }

  // ----- ROLE SCREEN -----
  if (isActive("role")) {
    if (key === " " || key === "Enter") {
      e.preventDefault();
      toggleFlip();
    }
  }

  // ----- DISCUSSION SCALE (1‚Äì10) -----
  if (isActive("discussion")) {
    if (key >= "1" && key <= "9") pulseNumber(+key);
    if (key === "0") pulseNumber(10);
    if (key === "Enter") toGuess();
  }

  // ----- GUESS SCREEN -----
  if (isActive("guess")) {
    if (key >= "1" && key <= "9") makeGuess(+key);
    if (key === "0") makeGuess(10);
  }

  // ----- RESULTS -----
  if (isActive("results") && key === "Enter") {
    playAgain();
  }
}

  function isActive(id) {
  return document.getElementById(id).classList.contains("active");
}

  function pulseNumber(n) {
  const items = document.querySelectorAll("#scaleBar div");
  const el = items[n - 1];
  if (!el) return;

  el.classList.remove("pulse");
  el.offsetHeight; // reset animation
  el.classList.add("pulse");
}
  function unlockAudio() {
  Object.values(sounds).forEach(s => {
    s.play().catch(()=>{});
    s.pause();
    s.currentTime = 0;
  });
  document.removeEventListener("click", unlockAudio);
}

document.addEventListener("click", unlockAudio);
  
function resetGame(){
  round = 1;
  players = [];
  roles = [];
  idx = 0;
  guessedNumber = null;
  guessedSaboteurs = [];
  guessedNobody = false;
  show("home");
}


  document.addEventListener("keydown", handleKey);

  const likelihoodToggle = document.getElementById("likelihoodToggle");
if (likelihoodToggle) {
  likelihoodToggle.addEventListener("change", e => {
    showLikelihoodHint = e.target.checked;
  });
}
/* === IMPOSTER GAME === */

let imposterPlayers = 3;
let imposterCount = 1;
let imposterNames = [];
let imposterRoles = [];
let imposterIndex = 0;
let secretWord = "";

const wordBank = {
  objects: [
    "Chair","Table","Phone","Backpack","Mirror","Clock","Lamp","Notebook","Pen","Wallet",
    "Keys","Bottle","Glasses","Remote","Couch","Pillow","Blanket","Fan","Headphones","Watch",
    "Scissors","Towel","Mug","Plate","Fork","Spoon","Knife","Bag","Shoes","Hat",
    "Jacket","Umbrella","Charger","Cable","Keyboard","Mouse","Screen","Book","Box","Shelf",
    "Door","Window","Frame","Candle","Coin","Brush","Comb","Basket","Bin","Folder"
  ],

  food: [
    "Pizza","Burger","Pasta","Rice","Soup","Sandwich","Salad","Tacos","Fries","Noodles",
    "Ice Cream","Cake","Cookies","Chocolate","Donut","Pancakes","Waffles","Cereal","Yogurt","Cheese",
    "Apple","Banana","Orange","Strawberry","Grapes","Chicken","Steak","Fish","Eggs","Bacon",
    "Sausage","Bread","Butter","Jam","Honey","Milk","Juice","Coffee","Tea","Smoothie",
    "Chips","Popcorn","Pretzels","Sushi","Ramen","Curry","Dumplings","Pie","Brownies","Muffins"
  ],

  animals: [
    "Dog","Cat","Horse","Cow","Pig","Sheep","Goat","Chicken","Duck","Goose",
    "Lion","Tiger","Elephant","Giraffe","Zebra","Bear","Wolf","Fox","Deer","Moose",
    "Monkey","Gorilla","Chimpanzee","Panda","Kangaroo","Koala","Sloth","Rabbit","Squirrel","Mouse",
    "Rat","Hamster","Hedgehog","Bat","Owl","Eagle","Hawk","Parrot","Penguin","Flamingo",
    "Dolphin","Whale","Shark","Octopus","Crab","Lobster","Frog","Toad","Snake","Lizard"
  ],

  colors: [
    "Red","Blue","Green","Yellow","Orange","Purple","Pink","Brown","Black","White",
    "Gray","Beige","Tan","Teal","Turquoise","Cyan","Magenta","Maroon","Navy","Olive",
    "Mint","Lavender","Peach","Coral","Gold","Silver","Bronze","Indigo","Violet","Plum",
    "Crimson","Scarlet","Amber","Aqua","Ivory","Charcoal","Slate","Sand","Sky Blue","Forest Green",
    "Rose","Lilac","Mustard","Copper","Rust","Emerald","Sapphire","Ruby","Pearl","Chocolate"
  ],

  shapes: [
    "Circle","Square","Triangle","Rectangle","Oval","Diamond","Star","Heart","Pentagon","Hexagon",
    "Octagon","Cube","Sphere","Cylinder","Cone","Pyramid","Prism","Rhombus","Trapezoid","Parallelogram",
    "Arrow","Cross","Spiral","Wave","Crescent","Ring","Donut","Bolt","Cloud","Teardrop",
    "Shield","Badge","Chevron","Zigzag","Flower","Snowflake","Gear","Plus","Minus","Infinity",
    "Keyhole","Explosion","Burst","Frame","Outline","Blob","Spike","Grid","Maze","Path"
  ],

  emotions: [
    "Happy","Sad","Angry","Excited","Nervous","Calm","Relaxed","Stressed","Anxious","Confident",
    "Proud","Embarrassed","Shy","Lonely","Loved","Jealous","Hopeful","Bored","Curious","Confused",
    "Surprised","Shocked","Scared","Brave","Fearful","Content","Peaceful","Overwhelmed","Frustrated","Motivated",
    "Inspired","Disappointed","Grateful","Guilty","Ashamed","Joyful","Cheerful","Moody","Tired","Energetic",
    "Playful","Serious","Determined","Uncertain","Optimistic","Pessimistic","Satisfied","Restless","Awkward","Amused"
  ],

  music: [
    "Song","Album","Playlist","Concert","Band","Singer","Guitar","Piano","Drums","Violin",
    "Bass","Microphone","Speaker","Headphones","Radio","DJ","Beat","Melody","Harmony","Rhythm",
    "Pop","Rock","Hip Hop","Rap","Jazz","Blues","Classical","Country","Electronic","EDM",
    "Indie","Folk","Metal","Punk","Reggae","R&B","Soul","Opera","Karaoke","Remix",
    "Chorus","Verse","Hook","Bridge","Tempo","Volume","Lyrics","Tune","Track","Jam"
  ],

  brands: [
    "Apple","Google","Samsung","Nike","Adidas","Puma","Coca-Cola","Pepsi","McDonald's","Burger King",
    "Starbucks","Amazon","Netflix","Disney","YouTube","TikTok","Instagram","Snapchat","Xbox","PlayStation",
    "Nintendo","Sony","LG","Microsoft","Intel","AMD","Tesla","Ford","Toyota","Honda",
    "IKEA","Walmart","Target","Costco","eBay","PayPal","Visa","Mastercard","Spotify","Uber",
    "Airbnb","Zoom","Slack","Discord","Reddit","Twitter","LinkedIn","Pinterest","Dropbox","Canva"
  ],

  hobbies: [
    "Gaming","Drawing","Painting","Reading","Writing","Cooking","Baking","Gardening","Knitting","Sewing",
    "Photography","Filmmaking","Dancing","Singing","Acting","Running","Jogging","Hiking","Camping","Fishing",
    "Swimming","Surfing","Skateboarding","Cycling","Yoga","Meditation","Weightlifting","Climbing","Martial Arts","Boxing",
    "Soccer","Basketball","Baseball","Football","Hockey","Tennis","Badminton","Volleyball","Bowling","Golf",
    "Chess","Board Games","Card Games","Puzzles","Model Building","Woodworking","Coding","Robotics","Collecting","Cosplay"
  ],

  movies: [
    "Inception","Titanic","Avatar","Frozen","Toy Story","The Matrix","Jurassic Park","Star Wars","Harry Potter","Lord of the Rings",
    "Marvel","Batman","Spider-Man","Iron Man","The Avengers","The Lion King","Finding Nemo","Up","Wall-E","Shrek",
    "Minions","Despicable Me","The Incredibles","Coco","Inside Out","Moana","Aladdin","Beauty and the Beast","Mulan","Hercules",
    "Jaws","Rocky","Terminator","Alien","Predator","Back to the Future","Indiana Jones","Ghostbusters","Die Hard","Home Alone",
    "The Notebook","La La Land","The Godfather","Pulp Fiction","Forrest Gump","Fight Club","Interstellar","Gladiator","Braveheart","Dune"
  ],

  jobs: [
    "Doctor","Nurse","Teacher","Professor","Student","Engineer","Programmer","Developer","Designer","Artist",
    "Writer","Journalist","Editor","Photographer","Videographer","Actor","Musician","Singer","Dancer","DJ",
    "Chef","Cook","Baker","Waiter","Barista","Cashier","Manager","CEO","Entrepreneur","Marketer",
    "Salesperson","Accountant","Banker","Economist","Analyst","Consultant","Lawyer","Judge","Paralegal","Police Officer",
    "Detective","Firefighter","Paramedic","EMT","Surgeon","Dentist","Veterinarian","Pharmacist","Scientist","Researcher"
  ],

  nature: [
    "Rain","Snow","Hail","Sleet","Wind","Breeze","Storm","Thunder","Lightning","Fog",
    "Cloud","Sky","Sun","Moon","Stars","Rainbow","Dawn","Sunrise","Sunset","Dusk",
    "Forest","Jungle","Desert","Savanna","Plains","Valley","Canyon","Mountain","Hill","Volcano",
    "River","Stream","Creek","Lake","Pond","Ocean","Sea","Beach","Coast","Shore",
    "Island","Waterfall","Glacier","Iceberg","Tundra","Swamp","Marsh","Bog","Reef","Lagoon"
  ],

  science: [
    "Robot","AI","Computer","Internet","Algorithm","Code","Program","Software","Hardware","Circuit",
    "Electricity","Battery","Energy","Power","Magnet","Gravity","Force","Motion","Speed","Velocity",
    "Atom","Molecule","Cell","DNA","Gene","Protein","Virus","Bacteria","Vaccine","Antibody",
    "Planet","Star","Galaxy","Universe","Asteroid","Comet","Meteor","Black Hole","Orbit","Telescope",
    "Microscope","Experiment","Hypothesis","Theory","Data","Research","Analysis","Lab","Discovery","Innovation"
  ],

  transport: [
    "Car","Truck","Van","Bus","Taxi","Uber","Train","Subway","Metro","Tram",
    "Bicycle","Motorcycle","Scooter","Skateboard","Rollerblades","Boat","Ship","Ferry","Yacht","Canoe",
    "Kayak","Jet Ski","Plane","Airplane","Jet","Helicopter","Glider","Rocket","Spaceship","Shuttle",
    "Airport","Runway","Terminal","Station","Platform","Ticket","Seat","Wheel","Engine","Motor",
    "Fuel","Gas","Diesel","Electric","Hybrid","Traffic","Road","Highway","Bridge","Tunnel"
  ]
};


function changeImposterPlayers(delta) {
  imposterPlayers = Math.min(20, Math.max(3, imposterPlayers + delta));
  document.getElementById("imposterPlayerCount").textContent = imposterPlayers;
}

function startImposterNames() {
  
  const selectedCats = document.querySelectorAll(".category-btn.active");

  if (selectedCats.length === 0) {
    document.getElementById("categoryGrid").classList.add("shake");
    setTimeout(() =>
      document.getElementById("categoryGrid").classList.remove("shake"), 300
    );
    return;
    
  const wrap = document.getElementById("imposterNameInputs");
  wrap.innerHTML = "";

  for (let i = 0; i < imposterPlayers; i++) {
    wrap.innerHTML += `<input value="Player ${i + 1}">`;
  }

  imposterCount = 1;
  updateImposterLimit();
  show("imposter-names");
}

function updateImposterLimit() {
  const max =
    imposterPlayers < 6 ? 1 :
    imposterPlayers < 11 ? 2 :
    imposterPlayers < 16 ? 3 : 4;

  imposterCount = Math.min(imposterCount, max);
  document.getElementById("imposterCountDisplay").textContent = imposterCount;
  document.getElementById("imposterLimitText").textContent =
    `Up to ${max} imposter${max > 1 ? "s" : ""} allowed`;
}

function changeImposterCount(delta) {
  const min = 1;
  const max = getMaxImposters(playerCount);

  imposterCount = Math.max(min, Math.min(max, imposterCount + delta));

  document.getElementById("imposterCountDisplay").textContent = imposterCount;
}

  function updateImposterButtons() {
  document.getElementById("imposterMinus").disabled = imposterCount === 1;
}

  function confirmImposterSetup() {
  if (imposterCount < 1) {
    alert("There must be at least one Imposter.");
    return;
  }

  startImposterGame();
}
  
function startImposterRoles() {
  imposterNames = [...document.querySelectorAll("#imposterNameInputs input")]
    .map(i => i.value || "Player");

  // Pick categories
  const selectedCats = [...document.querySelectorAll(".category-btn.active")]
  .map(b => b.dataset.cat);

  let pool = [];
  selectedCats.forEach(cat => pool.push(...wordBank[cat]));
  secretWord = pool[Math.floor(Math.random() * pool.length)];

  // Assign roles
  imposterRoles = Array(imposterPlayers).fill("civilian");
  const shuffled = [...Array(imposterPlayers).keys()].sort(() => Math.random() - 0.5);

  for (let i = 0; i < imposterCount; i++) {
    imposterRoles[shuffled[i]] = "imposter";
  }

  imposterIndex = 0;
  showImposterRole();
}

function showImposterRole() {
  document.getElementById("imposterCurrentName").textContent =
    imposterNames[imposterIndex];

  const role = imposterRoles[imposterIndex];
  const back = document.getElementById("imposterRoleBack");

  back.innerHTML = role === "imposter"
    ? `<div class="imposter-card"> <h2>IMPOSTER</h2> <p>Blend in. Guess the word.</p> </div>`
    : `
<div class="imposter-card">
  <p class="word-label">The secret word is‚Ä¶</p>
  <h2 class="secret-word">${secretWord}</h2>
  <p>Give related clues.</p>
</div>`;

  document.getElementById("imposterFlip").classList.remove("revealed");
  show("imposter-role");
}

function toggleImposterFlip() {
  document.getElementById("imposterFlip").classList.toggle("revealed");
}

function nextImposterPlayer() {
  imposterIndex++;
  if (imposterIndex < imposterPlayers) showImposterRole();
  else {
    const starter =
  imposterNames[Math.floor(Math.random() * imposterNames.length)];

document.getElementById("imposterDiscussionStarter").innerHTML =
  `<strong>${starter}</strong> starts the discussion`;

    show("imposter-discussion");
  }
}

function revealImposter() {
  document.getElementById("imposterWordReveal").textContent = secretWord;
  document.getElementById("imposterList").textContent =
    imposterNames.filter((_, i) => imposterRoles[i] === "imposter").join(", ");
  show("imposter-results");
}
  
document.querySelectorAll(".category-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    btn.classList.toggle("active");
  });
});

</script>
<div id="sabPopup" class="popup hidden">
  <div class="popup-content">
    <h3>Saboteur Win Condition</h3>
    <p>
      If the Saboteur successfully misled the Guesser
      and was not caught, they win!
    </p>
    <p>
      If the spot is blank, there was no Saboteur. If the guesser beleived there was no saboteur, the teammates still win!
    </p>
    <button onclick="closeSaboteurInfo()">Got it</button>
  </div>
</div>

  <div id="rulesPopup" class="popup hidden">
  <div class="popup-content">
    <h3>How to Play</h3>
    <p>
      Everyone gets the same secret number (1‚Äì10).
      One player is the Guesser and must figure it out.
      </p>
      <p>
      One player <em>might</em> be the Saboteur, who tries to mislead the guesser.
    </p>
    <p>
      Teammates win only if the Guesser correctly guesses the number OR the Saboteur.
    </p>
     <p>
      The Saboteur wins if they stay hidden and cause a wrong guess.
    </p>
     <p>
      The Guesser must guess who they think the Saboteur is before guessing the secret number.
    </p>
    <button onclick="closeRules()">Got it!</button>
    <label class="hint-toggle">
  <input type="checkbox" id="likelihoodToggle">
  Show Saboteur Likelihood Hint
</label>
  </div>
</div>
  
</body>
</html>
