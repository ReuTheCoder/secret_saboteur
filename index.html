<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Secret Saboteur</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#00BCD4;
  --primary-dark:#0097A7;
  --bg:#ffffff;
  --text:#212121;
  --muted:#6b6b6b;
  --card:#f7f7f7;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,system-ui;
  background:var(--bg);
  color:var(--text);
}

.screen{
  max-width:420px;
  margin:0 auto;
  padding:24px 16px 40px;
  display:none;
}
.screen.active{display:block}

.flip-wrap {
  perspective: 1000px;
  margin-bottom: 20px;
}

@keyframes slideFadeIn {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.screen.results-animate {
  animation: slideFadeIn 0.8s ease forwards;
}

  #resultMessage {
  text-align: center;
  font-size: 1.8rem;
  margin-bottom: 12px;
  animation: popIn 0.4s ease;
}

@keyframes popIn {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.correct {
  color: #2e7d32;
}

.incorrect {
  color: #c62828;
}

  #results button + button {
  margin-top: 12px;
}

  #currentName {
  margin-bottom: 16px;
}

.card.sab-card {
  background: #000;
  color: #fff;
  position: relative;
}

.info-btn {
  position: static;
  top: 12px;
  right: 12px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: none;
 background: rgba(0,188,212,0.15);
  color: var(--primary);
  font-weight: 700;
  font-size: 1rem;
  padding: 0;
}

.info-btn:active {
  transform: scale(0.95);
}

  .popup {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.popup.hidden {
  display: none;
}

.popup-content {
  background: white;
  color: var(--text);
  border-radius: 18px;
  padding: 20px;
  max-width: 320px;
  text-align: center;
}

  .confetti {
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 999;
}

.confetti span {
  position: absolute;
  width: 8px;
  height: 12px;
  background: var(--primary);
  opacity: 0.9;
  animation: fall 1.8s linear forwards;
}

@keyframes fall {
  from {
    transform: translateY(-20px) rotate(0deg);
  }
  to {
    transform: translateY(100vh) rotate(360deg);
  }
}

  #intro .info-btn {
  position: static;
  top: 16px;
  right: 16px;
    width: 44px;
  height: 44px;
  font-size: 1.1rem;
}
  #intro {
  position: relative;
}

  .small-btn {
  padding: 8px 12px;
  font-size: 0.9rem;
  width: auto;
  margin: 12px auto 20px;
  display: block;
}

#promptText {
  text-align: center;
  margin-top: 12px;
}

  .scale {
  gap: 6px;
}

  @keyframes pressPulse {
  0%   { transform: scale(1); }
  50%  { transform: scale(0.94); }
  100% { transform: scale(1); }
}

.scale div.pulse {
  animation: pressPulse 0.4s ease;
}

  .scale {
  opacity: 0;
  transform: translateY(12px);
  animation: scaleIn 0.5s ease forwards;
}

@keyframes scaleIn {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

  #guess {
  animation: glowPulse 2s ease-in-out infinite;
}

@keyframes glowPulse {
  0% {
    box-shadow: 0 0 0 rgba(0,188,212,0);
  }
  50% {
    box-shadow: 0 0 24px rgba(0,188,212,0.25);
  }
  100% {
    box-shadow: 0 0 0 rgba(0,188,212,0);
  }
}

  .info-btn {
  z-index: 100;
}
  .intro-info {
  margin-top: 28px;
  display: flex;
  justify-content: center;
}
  
h1,h2{text-align:center;margin:0}
h1{font-size:2.2rem}
h2{font-size:1.6rem}

.sub{
  text-align:center;
  color:var(--muted);
  margin:8px 0 20px;
}

button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  font-size:1.1rem;
  font-weight:600;
  background:var(--primary);
  color:white;
}
button.secondary{
  background:white;
  color:var(--text);
  border:2px solid #e0e0e0;
}
button:active{transform:scale(.98)}

.grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:12px;
  margin:20px 0;
}

.player-btn {
  position: relative;
}

.player-btn::after {
  content: attr(data-num);
  position: absolute;
  top: 6px;
  right: 10px;
  font-size: 0.7rem;
  opacity: 0.6;
}
.card{
  background:var(--card);
  border-radius:18px;
  padding:18px;
  margin:20px 0;
}

input{
  width:100%;
  padding:14px;
  font-size:1rem;
  border-radius:12px;
  border:1.5px solid #ccc;
  margin-bottom:12px;
}

/* FLIP CARD */
.flip-wrap{
  perspective:1000px;
}
.flip{
  position:relative;
  width:100%;
  height:260px;
  transform-style:preserve-3d;
  transition:transform .6s;
}
.flip.revealed{transform:rotateY(180deg)}
.face{
  position:absolute;
  width:100%;
  height:100%;
  border-radius:20px;
  backface-visibility:hidden;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:20px;
  text-align:center;
}
.front{
  background:var(--primary);
  color:white;
}
.back{
  transform:rotateY(180deg);
  background:var(--primary);
  color:white;
}
.saboteur .back{
  background:black;
  filter:grayscale(1);
}

/* Eye icon */
.eye{
  width:56px;
  height:56px;
  border-radius:50%;
  background:rgba(255,255,255,.2);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  margin-bottom:12px;
}

.scale{
  display:flex;
  gap:4px;
  margin:12px 0;
}
.scale div{
  flex:1;
  background: var(--primary);
  color: white;
  border-radius:6px;
  font-weight:600;
  padding: 8px;

  display:flex;
  align-items:center;
  justify-content:center;
}
.scale .dark{background:var(--primary);color:white}

.footer{
  text-align:center;
  margin-top:16px;
  font-size:.9rem;
  color:var(--muted);
}
</style>
</head>

<body>

<!-- INTRO -->
<div class="screen active" id="intro">
  
  <h1>Secret Saboteur</h1>
  <div class="sub">A social deduction party game</div>

  <div class="card">
    <h2>How many players?</h2>
    <div class="grid" id="playerGrid"></div>
    <div class="footer">Select 3‚Äì10 players to start</div>
  </div>
 <div class="intro-info">
  <button class="info-btn" onclick="showRules()">?</button>
</div>
</div>

<!-- NAMES -->
<div class="screen" id="names">
  <h2>Enter Player Names</h2>
  <div class="sub">Who‚Äôs playing today?</div>
  <div class="card" id="nameInputs"></div>
  <button onclick="startRound()">Continue ‚Üí</button>
</div>

<!-- ROLE -->
<div class="screen" id="role">
  <div class="sub">Pass the device to</div>
  <h2 id="currentName"></h2>

  <div class="flip-wrap">
    <div class="flip" id="flipCard" onclick="toggleFlip()">
      <div class="face front">
        <h2>Tap to Reveal</h2>
      </div>
      <div class="face back" id="roleBack"></div>
    </div>
  </div>

  <button onclick="nextPlayer()">Next Player</button>
</div>

<!-- DISCUSSION -->
<div class="screen" id="discussion">
  <h2>Discussion Time</h2>
  <div class="sub">Each player gives an answer</div>

  <h3 id="promptText"></h3>
  <div class="card">
    <div class="scale" id="scaleBar"></div>
    <div style="display:flex;justify-content:space-between">
      <small id="lowLabel"></small>
      <small id="highLabel"></small>
    </div>
  </div>

 <button class="secondary small-btn" onclick="rerollPrompt()">‚Üª New Prompt</button>
<button onclick="toGuess()">Continue to Guess ‚Üí</button>
</div>

<!-- GUESS -->
<div class="screen" id="guess">
  <h2>Guesser</h2>
  <div class="sub" id="guessPrompt"></div>

  <div class="grid">
     <button class="player-btn" onclick="makeGuess(1)">1</button>
  <button class="player-btn" onclick="makeGuess(2)">2</button>
  <button class="player-btn" onclick="makeGuess(3)">3</button>
  <button class="player-btn" onclick="makeGuess(4)">4</button>
  <button class="player-btn" onclick="makeGuess(5)">5</button>
  <button class="player-btn" onclick="makeGuess(6)">6</button>
  <button class="player-btn" onclick="makeGuess(7)">7</button>
  <button class="player-btn" onclick="makeGuess(8)">8</button>
  <button class="player-btn" onclick="makeGuess(9)">9</button>
  <button class="player-btn" onclick="makeGuess(10)">10</button>
  </div>
</div>

<!-- RESULTS -->
<div class="screen" id="results">
  <h2>Results</h2>
  <div class="card">
    <h2 id="resultMessage"></h2>
    <p>The number was <b id="realNum"></b></p>
    <p>Guesser said <b id="guessNum"></b></p>
  </div>

  <div class="card sab-card">
  Saboteur was <b id="sabName"></b>

  <button class="info-btn" onclick="showSaboteurInfo()">?</button>
</div>

  <button onclick="playAgain()">‚Üª Play Again</button>
  <button class="secondary" onclick="resetGame()">New Game</button>
</div>

<script>
/* --- DATA --- */
const prompts = [
  { title: "Reasons to call 911", low: "Reasonable", high: "Ridiculous" },
  { title: "Places to nap", low: "Very comfortable", high: "Very uncomfortable" },
  { title: "Cool for a high-schooler", low: "Not cool", high: "Cool" },
  { title: "Things to discover in your pocket", low: "Exciting", high: "Not exciting" },
  { title: "Last words", low: "Forgettable", high: "Memorable" },
  { title: "Movies", low: "Relaxing", high: "Intense" },
  { title: "TV shows", low: "Serious", high: "Relaxing" },
  { title: "Food to eat at 7am", low: "Good", high: "Bad" },
  { title: "Places for summer vacation", low: "Worst", high: "Best" },
  { title: "Times to do homework", low: "Good", high: "Bad" },

  { title: "Excuses to leave a party early", low: "Believable", high: "Unbelievable" },
  { title: "Things you should never Google", low: "Harmless", high: "Traumatizing" },
  { title: "Things that ruin your day", low: "Minor", high: "Devastating" },
  { title: "Reasons to cancel plans", low: "Acceptable", high: "Unforgivable" },
  { title: "School supplies", low: "Useless", high: "Essential" },
  { title: "Ways to get suspended", low: "Understandable", high: "Stupid" },
  { title: "Things to do in class when bored", low: "Quiet", high: "Disruptive" },
  { title: "Clubs to join", low: "Boring", high: "Fun" },
  { title: "Times to laugh", low: "Appropriate", high: "Inappropriate" },
  { title: "Things to accidentally text your teacher", low: "Fine", high: "Horrifying" },

  { title: "Icebreakers", low: "Boring", high: "Painfully awkward" },
  { title: "Foods to bring to a potluck", low: "Welcomed", high: "Questioned" },
  { title: "Midnight snacks", low: "Normal", high: "Concerning" },
  { title: "Foods to eat in class", low: "Stealthy", high: "Obvious" },
  { title: "Foods that should never be microwaved", low: "Bad", high: "War crime" },
  { title: "Restaurant orders", low: "Safe", high: "Risky" },
  { title: "Places to sit", low: "Comfortable", high: "Miserable" },
  { title: "Sounds to fall asleep to", low: "Soothing", high: "Unbearable" },
  { title: "Clothes to sleep in", low: "Comfy", high: "A mistake" },
  { title: "Weather to walk in", low: "Pleasant", high: "Brutal" },

  { title: "Times to wake up", low: "Ideal", high: "Cruel" },
  { title: "Things to yell in a library", low: "Quiet", high: "Unacceptable" },
  { title: "Places to lose your phone", low: "Recoverable", high: "Hopeless" },
  { title: "Ways to get famous", low: "Respectable", high: "Infamous" },
  { title: "Lies", low: "Believable", high: "Terrible" },
  { title: "Secrets", low: "Harmless", high: "Life-ruining" },
  { title: "Bad ideas", low: "Questionable", high: "Catastrophic" },
  { title: "Social mistakes", low: "Forgivable", high: "Unforgettable" },
  { title: "Times to leave", low: "Polite", high: "Dramatic" },
  { title: "Things to do instead of studying", low: "Understandable", high: "Irresponsible" },
  
  { title: "Things that make you instantly cringe", low: "Mild", high: "Physically painful" },
  { title: "Things to hear right before a test", low: "Comforting", high: "Terrifying" },
  { title: "Things to forget at a sleepover", low: "No big deal", high: "Friendship-ending" },
  { title: "Things that should never be said in a group chat", low: "Awkward", high: "Nuclear" },
  { title: "Things that feel like a scam", low: "Suspicious", high: "Obviously fake" },
  { title: "Things that make a teacher pause", low: "Confusing", high: "Concerning" },
  { title: "Things that feel illegal to do alone", low: "A little weird", high: "Extremely alarming" },
  { title: "Things to say when you don't hear someone", low: "Polite", high: "Unhinged" },
  { title: "Things that ruin a vibe instantly", low: "Buzzkill", high: "Atmosphere destroyer" },
  { title: "Things that make a room go silent", low: "Unexpected", high: "Catastrophic" },

  { title: "Things to bring to a group project meeting", low: "Helpful", high: "Pointless" },
  { title: "Things that shouldn't be competitive", low: "Odd", high: "Unhinged" },
  { title: "Things that feel personal but aren't", low: "Slightly invasive", high: "Way too much" },
  { title: "Things to be late to", low: "Forgivable", high: "Unacceptable" },
  { title: "Things to say when someone trips", low: "Supportive", high: "Evil" },
  { title: "Things that feel louder than they are", low: "Noticeable", high: "Deafening" },
  { title: "Things that make you rethink a friendship", low: "Questionable", high: "Dealbreaker" },
  { title: "Things to overhear on public transit", low: "Boring", high: "Life-changing" },
  { title: "Things that shouldn't have lore", low: "Odd", high: "Deeply unsettling" },
  { title: "Things that make waiting worse", low: "Annoying", high: "Unbearable" },

  { title: "Things that feel like a jump scare", low: "Startling", high: "Heart attack" },
  { title: "Things that shouldn't be sticky", low: "Annoying", high: "Horrifying" },
  { title: "Things to say during a presentation", low: "Recoverable", high: "Career-ending" },
  { title: "Things that make you immediately apologize", low: "Oops", high: "I'm so sorry" },
  { title: "Things to notice too late", low: "Inconvenient", high: "Disastrous" },
  { title: "Things that feel illegal at night", low: "Suspicious", high: "Terrifying" },
  { title: "Things that should not be whispered", low: "Strange", high: "Threatening" },
  { title: "Things to hear from the next room", low: "Confusing", high: "Alarming" },
  { title: "Things that make silence worse", low: "Awkward", high: "Unbearable" },
  { title: "Things that ruin confidence instantly", low: "Doubt-inducing", high: "Soul-crushing" },

  { title: "Things to bring up at the wrong time", low: "Awkward", high: "Unforgivable" },
  { title: "Things that feel cursed", low: "Off-putting", high: "Actively haunted" },
  { title: "Things that shouldn't make noise", low: "Annoying", high: "Terrifying" },
  { title: "Things to forget you're holding", low: "Embarrassing", high: "Dangerous" },
  { title: "Things that make you question reality", low: "Confusing", high: "Existential crisis" },
  
  { title: "Things that feel awkward way too fast", low: "Mild", high: "Unbearable" },
  { title: "Things that feel illegal but aren't", low: "Suspicious", high: "Heart-racing" },
  { title: "Things that ruin concentration instantly", low: "Distracting", high: "Impossible" },
  { title: "Things you shouldn't clap for", low: "Odd", high: "Unhinged" },
  { title: "Things that feel colder than expected", low: "Chilly", high: "Freezing" },
  { title: "Things that feel louder than they are", low: "Noticeable", high: "Deafening" },
  { title: "Things that shouldn't be sticky", low: "Annoying", high: "Horrifying" },
  { title: "Things that make people stare", low: "Curious", high: "Alarmed" },
  { title: "Things that feel too personal to ask", low: "Awkward", high: "Unacceptable" },
  { title: "Things that feel fake even when real", low: "Suspicious", high: "Impossible" },

  { title: "Things that ruin a good mood", low: "Minor", high: "Day-ending" },
  { title: "Things that feel wrong at night", low: "Weird", high: "Terrifying" },
  { title: "Things that feel dramatic for no reason", low: "Extra", high: "Unhinged" },
  { title: "Things that should never be whispered", low: "Strange", high: "Threatening" },
  { title: "Things that feel longer than they are", low: "Dragging", high: "Endless" },
  { title: "Things that feel rude but aren't", low: "Blunt", high: "Savage" },
  { title: "Things that instantly kill confidence", low: "Doubtful", high: "Crushing" },
  { title: "Things that feel illegal in public", low: "Embarrassing", high: "Unthinkable" },
  { title: "Things that feel suspiciously quiet", low: "Calm", high: "Ominous" },
  { title: "Things that feel too powerful", low: "Impressive", high: "Terrifying" },

  { title: "Things that feel unsafe emotionally", low: "Awkward", high: "Devastating" },
  { title: "Things that shouldn't be competitive", low: "Odd", high: "Unhinged" },
  { title: "Things that feel worse when watched", low: "Uncomfortable", high: "Impossible" },
  { title: "Things that feel fake-polite", low: "Forced", high: "Painful" },
  { title: "Things that feel cursed", low: "Off-putting", high: "Actively haunted" },
  { title: "Things that make silence worse", low: "Awkward", high: "Unbearable" },
  { title: "Things that feel like a trap", low: "Suspicious", high: "Certain doom" },
  { title: "Things that feel oddly threatening", low: "Unsettling", high: "Terrifying" },
  { title: "Things that feel wrong immediately", low: "Off", high: "Alarming" },
  { title: "Things that feel too intense too fast", low: "Strong", high: "Overwhelming" }
];

let players=[],roles=[],count=0,idx=0,number=0,guess=0,round=1;

const sounds = {
  flip: new Audio("data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQgAAAAA"),
  correct: new Audio("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQgAAAAA"),
  wrong: new Audio("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQgAAAAA")
};

/* --- FLOW --- */
function show(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

const grid=document.getElementById('playerGrid');
for(let i = 3; i <= 10; i++) {
  const btn = document.createElement("button");
btn.textContent = i;
btn.onclick = () => selectPlayers(i);
grid.appendChild(btn);
}

function selectPlayers(n){
  count=n;
  show('names');
  const wrap=document.getElementById('nameInputs');
  wrap.innerHTML='';
  for(let i=0;i<n;i++){
    wrap.innerHTML+=`<input value="Player ${i+1}">`;
  }
}

function startRound(){
  players=[...document.querySelectorAll('#nameInputs input')].map(i=>i.value||'Player');
  roles=Array(count).fill('teammate');
  roles[Math.floor(Math.random()*count)]='saboteur';
  roles[Math.floor(Math.random()*count)]='guesser';
  number=Math.floor(Math.random()*10)+1;
  idx=0;
  showRole();
}

function showRole(){
  document.getElementById('currentName').textContent=players[idx];
  const back=document.getElementById('roleBack');
  const role=roles[idx];
  const flip = back.parentElement;
flip.classList.remove('saboteur');
if (role === 'saboteur') flip.classList.add('saboteur');
  
  back.innerHTML=`
    <div class="eye">üëÅÔ∏è</div>
    <h2>${role.toUpperCase()}</h2>
    <p>${role==='teammate'?'Help the Guesser!':role==='saboteur'?'Mislead the group!':'Show everyone your role, you are guessing the number!'}</p>
    ${role!=='guesser'?`<h1>${number}</h1>`:''}
  `;
  document.getElementById('flipCard').classList.remove('revealed');
  show('role');
}

function revealCorrectness() {
  const msg = document.getElementById('resultMessage');

  if (guess === number) sounds.correct.play();
else sounds.wrong.play();
  
  if (guess === number) {
    msg.textContent = "‚úÖ Correct!";
    msg.className = "correct";
  } else {
    msg.textContent = "‚ùå Incorrect!";
    msg.className = "incorrect";
  }
}

function nextPlayer(){
  idx++;
  if(idx<count) showRole();
  else startDiscussion();
}

function startDiscussion(){
  const scale = document.getElementById('scaleBar');
scale.style.animation = 'none';
scale.offsetHeight; // reflow
scale.style.animation = '';
  const p=prompts[Math.floor(Math.random()*prompts.length)];
  window.curPrompt=p;
  document.getElementById('promptText').textContent=p.title;
  document.getElementById('lowLabel').textContent=p.low;
  document.getElementById('highLabel').textContent=p.high;
  document.getElementById('scaleBar').innerHTML='';
  for (let i = 1; i <= 10; i++) {
  document.getElementById('scaleBar').innerHTML += `<div>${i}</div>`;
}
  show('discussion');
  pulseScale();
}

function toGuess(){
  document.getElementById('guessPrompt').textContent=curPrompt.title;
  show('guess');
}

function makeGuess(n){
  document.getElementById('guess').style.animation = 'none';
  guess = n;

  document.getElementById('realNum').textContent = number;
  document.getElementById('guessNum').textContent = guess;
  const sabIndex = roles.findIndex(r => r === 'saboteur');
document.getElementById('sabName').textContent = players[sabIndex];

  const results = document.getElementById('results');
  results.classList.remove('results-animate');

  show('results');

  // trigger animation cleanly
  requestAnimationFrame(() => {
    results.classList.add('results-animate');
  });
 if (guess === number) launchConfetti();
  revealCorrectness();
}

  function showSaboteurInfo() {
  document.getElementById('sabPopup').classList.remove('hidden');
}

function closeSaboteurInfo() {
  document.getElementById('sabPopup').classList.add('hidden');
}

  function launchConfetti() {
  const wrap = document.createElement('div');
  wrap.className = 'confetti';

  for (let i = 0; i < 80; i++) {
    const c = document.createElement('span');
    c.style.left = Math.random() * 100 + 'vw';
    c.style.animationDelay = Math.random() * 0.4 + 's';
    wrap.appendChild(c);
  }

  document.body.appendChild(wrap);
  setTimeout(() => wrap.remove(), 2000);
}

  function toggleFlip() {
  sounds.flip.play();
  document.getElementById('flipCard').classList.toggle('revealed');
}

  function rerollPrompt() {
  startDiscussion();
}

  function showRules() {
  document.getElementById('rulesPopup').classList.remove('hidden');
}

function closeRules() {
  document.getElementById('rulesPopup').classList.add('hidden');
}

  function pulseScale() {
  const items = document.querySelectorAll('#scaleBar div');
  items.forEach((el, i) => {
    setTimeout(() => {
      el.classList.add('pulse');
      setTimeout(() => el.classList.remove('pulse'), 400);
    }, i * 120);
  });
}


function playAgain(){
  startRound();
}

  function handleKey(e) {
  const key = e.key;

  // ----- POPUPS -----
  if (key === "Escape") {
    closeRules();
    closeSaboteurInfo();
    return;
  }

  // ----- ROLE SCREEN -----
  if (isActive("role")) {
    if (key === " " || key === "Enter") {
      e.preventDefault();
      toggleFlip();
    }
  }

  // ----- DISCUSSION SCALE (1‚Äì10) -----
  if (isActive("discussion")) {
    if (key >= "1" && key <= "9") pulseNumber(+key);
    if (key === "0") pulseNumber(10);
    if (key === "Enter") toGuess();
  }

  // ----- GUESS SCREEN -----
  if (isActive("guess")) {
    if (key >= "1" && key <= "9") makeGuess(+key);
    if (key === "0") makeGuess(10);
  }

  // ----- RESULTS -----
  if (isActive("results") && key === "Enter") {
    playAgain();
  }
}

  function isActive(id) {
  return document.getElementById(id).classList.contains("active");
}

  function pulseNumber(n) {
  const items = document.querySelectorAll("#scaleBar div");
  const el = items[n - 1];
  if (!el) return;

  el.classList.remove("pulse");
  el.offsetHeight; // reset animation
  el.classList.add("pulse");
}
  
function resetGame(){round=1;show('intro')}
  document.addEventListener("keydown", handleKey);
</script>
<div id="sabPopup" class="popup hidden">
  <div class="popup-content">
    <h3>Saboteur Win Condition</h3>
    <p>
      If the Saboteur successfully misled the Guesser
      and was not caught, they win!
    </p>
    <p>
      If the spot is blank, there was no Saboteur. If the guesser beleived there was no saboteur, the teammates still win!
    </p>
    <button onclick="closeSaboteurInfo()">Got it</button>
  </div>
</div>

  <div id="rulesPopup" class="popup hidden">
  <div class="popup-content">
    <h3>How to Play</h3>
    <p>
      Everyone gets the same secret number (1‚Äì10).
      One player is the Guesser and must figure it out.
      </p>
      <p>
      One player <em>might<em> be the Saboteur, who tries to mislead the guesser.
    </p>
    <p>
      Teammates win only if the Guesser is correct or if they expose the Saboteur.
    </p>
     <p>
      The Saboteur wins if they stay hidden and cause a wrong guess.
    </p>
     <p>
      The Guesser must guess who they think the Saboteur is before guessing the secret number.
    </p>
    <button onclick="closeRules()">Got it</button>
  </div>
</div>
  
</body>
</html>
